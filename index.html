<!DOCTYPE html>
<html lang="zh-TW" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Sports Economics & Volleyball Studies Guide | åœ‹éš›é«”è‚²ç¶“æ¿Ÿç•™å­¸æŒ‡å—</title>
    
    <!-- Tailwind CSS (Via CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js (Via CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts: Noto Sans TC (Traditional Chinese) & Inter (English) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind Config for Dark Mode and Brand Colors -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Inter"', '"Noto Sans TC"', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            50: '#f9f8f6',  // Light bg
                            100: '#eef0f2',
                            200: '#dce0e5',
                            500: '#64748b', // Slate
                            600: '#475569',
                            800: '#1e293b', // Dark bg
                            900: '#0f172a', // Deep Dark
                            accent: '#d97706', // Amber 600 (Primary Action)
                            accentHover: '#b45309',
                            accentDark: '#fbbf24', // Amber 400 (Dark mode accent)
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* MANDATORY: Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Smooth Transitions for Theme Switching */
        body, div, nav, section, h1, h2, h3, p, span, button, select, input {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 3px;
        }
        .dark .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #475569;
        }
    </style>
</head>
<body class="bg-brand-50 text-brand-800 dark:bg-brand-900 dark:text-brand-100 font-sans leading-relaxed selection:bg-brand-accent selection:text-white flex flex-col min-h-screen">

    <!-- REQUIRED PLACEHOLDERS -->
    <!-- Chosen Palette: Bilingual Support + Dark Mode. Warm Neutrals (Light) / Deep Slate (Dark) with Amber Accents. -->
    
    <!-- Application Structure Plan:
         1. Header: Settings (Lang/Theme) & Navigation.
         2. Hero: Context validation (Econ + Sports + Volleyball focus).
         3. Research Insights (Split into Silver Economy & Volleyball): Detailed text analysis.
         4. Dashboard: The core tool. Filters for Region/Sport. Logic tailored to highlight ALL programs (Baseball, Volleyball, General).
         5. Footer: Specific credits per user request.
    -->

    <!-- Visualization & Content Choices:
         1. "Volleyball Market Models" (Bar Chart): Comparing league valuations/structure (PVF vs SV vs TVL).
         2. "Program Capability Radar" (Radar Chart): Theory vs Practice vs Legal vs Health.
         3. "Regional Distribution" (Doughnut): Geo-distribution of recommended schools.
         4. Cards: Bilingual data objects dynamically rendered.
    -->
    
    <!-- CONFIRMATION: NO SVG graphics used (Icons are Unicode/CSS). NO Mermaid JS used. -->

    <!-- Navigation -->
    <nav class="bg-white/90 dark:bg-brand-900/90 backdrop-blur-sm border-b border-brand-200 dark:border-brand-600 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <!-- Logo -->
                <div class="flex items-center cursor-pointer" onclick="window.scrollTo(0,0)">
                    <span class="text-xl md:text-2xl font-bold tracking-tight">
                        <span class="text-brand-accent dark:text-brand-accentDark">Sport</span>Econ<span class="text-brand-500 dark:text-brand-400">Global</span>
                    </span>
                </div>

                <!-- Controls -->
                <div class="flex items-center space-x-2 md:space-x-4">
                    <!-- Nav Links (Desktop) -->
                    <div class="hidden md:flex space-x-4 mr-4">
                        <button onclick="scrollToSection('research-insights')" class="text-sm font-medium hover:text-brand-accent dark:hover:text-brand-accentDark" data-i18n="nav_research">ç ”ç©¶å°ˆé¡Œ</button>
                        <button onclick="scrollToSection('dashboard')" class="text-sm font-medium hover:text-brand-accent dark:hover:text-brand-accentDark" data-i18n="nav_analysis">æ“‡æ ¡åˆ†æ</button>
                    </div>

                    <!-- Theme Toggle -->
                    <button id="theme-toggle" class="p-2 rounded-full hover:bg-brand-100 dark:hover:bg-brand-800 transition" aria-label="Toggle Theme">
                        <span id="theme-icon" class="text-lg">ğŸŒ™</span>
                    </button>

                    <!-- Lang Toggle -->
                    <button id="lang-toggle" class="px-3 py-1 text-xs font-bold border border-brand-300 dark:border-brand-600 rounded hover:bg-brand-100 dark:hover:bg-brand-800 transition">
                        EN / ç¹ä¸­
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-16">

        <!-- Hero Section -->
        <section class="text-center max-w-4xl mx-auto pt-8">
            <h1 class="text-3xl md:text-5xl font-bold mb-6 leading-tight">
                <span data-i18n="hero_title_1">é€£çµæ•¸æ“šèˆ‡è³½å ´ï¼š</span><br>
                <span class="text-brand-accent dark:text-brand-accentDark" data-i18n="hero_title_2">åœ‹éš›é«”è‚²ç¶“æ¿Ÿèˆ‡æ³•å¾‹æ·±é€ æŒ‡å—</span>
            </h1>
            <p class="text-lg text-brand-600 dark:text-brand-300 mb-8 max-w-3xl mx-auto leading-relaxed" data-i18n="hero_desc">
                å°ˆç‚ºå…·å‚™ã€Œåœ‹éš›é«”è‚²äº‹å‹™ã€èˆ‡ã€Œç¶“æ¿Ÿç³»ã€é›™å­¸ä½èƒŒæ™¯çš„å­¸ç”Ÿè¨­è¨ˆã€‚
                èšç„¦ç¾ã€åŠ ã€ç´æ¾³åŠäºæ´²è‹±èªå­¸ç¨‹ã€‚é‡å°æ’çƒç”¢æ¥­ç™¼å±•ã€é«˜é½¡åŒ–ç¤¾æœƒç¶“æ¿Ÿèˆ‡é‹å‹•æ³•å¾‹é ˜åŸŸé€²è¡Œæ·±åº¦åˆ†æã€‚
            </p>
            <div class="flex flex-wrap justify-center gap-3 text-sm">
                <span class="px-3 py-1 bg-white dark:bg-brand-800 border border-brand-200 dark:border-brand-600 rounded-full shadow-sm">ğŸ <span data-i18n="tag_volleyball">æ’çƒç¶“æ¿Ÿ</span></span>
                <span class="px-3 py-1 bg-white dark:bg-brand-800 border border-brand-200 dark:border-brand-600 rounded-full shadow-sm">âš¾ <span data-i18n="tag_baseball">æ£’çƒæ•¸æ“š</span></span>
                <span class="px-3 py-1 bg-white dark:bg-brand-800 border border-brand-200 dark:border-brand-600 rounded-full shadow-sm">âš–ï¸ <span data-i18n="tag_law">æ³•å¾‹èˆ‡åˆè¦</span></span>
                <span class="px-3 py-1 bg-white dark:bg-brand-800 border border-brand-200 dark:border-brand-600 rounded-full shadow-sm">ğŸ‘µ <span data-i18n="tag_silver">éŠ€é«®å•†æ©Ÿ</span></span>
            </div>
        </section>

        <!-- Research Insights (Volleyball + Silver Economy) -->
        <section id="research-insights" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Insight 1: Volleyball Economics -->
            <div class="bg-white dark:bg-brand-800 rounded-2xl shadow-sm border-l-8 border-brand-accent overflow-hidden flex flex-col">
                <div class="p-6 md:p-8 flex-grow">
                    <h2 class="text-2xl font-bold mb-4 flex items-center text-brand-800 dark:text-brand-100">
                        ğŸ <span class="ml-2" data-i18n="vb_title">æ’çƒç¶“æ¿Ÿï¼šå…¨çƒèˆ‡å°ç£è¦–è§’</span>
                    </h2>
                    
                    <div class="space-y-4">
                        <div class="bg-brand-50 dark:bg-brand-900 p-4 rounded-lg">
                            <h3 class="font-bold text-base mb-2 text-brand-700 dark:text-brand-300" data-i18n="vb_global_title">å…¨çƒè¶¨å‹¢ï¼šå¥³å­é‹å‹•ç¶“æ¿Ÿçš„å´›èµ·</h3>
                            <p class="text-sm text-brand-600 dark:text-brand-400 leading-relaxed" data-i18n="vb_global_desc">
                                æ’çƒæ˜¯æ¥µå°‘æ•¸å¥³æ€§è§€çœ¾èˆ‡ç¶“æ¿Ÿåƒ¹å€¼å¸¸è¶…è¶Šç”·æ€§çš„é …ç›®ã€‚ç¾åœ‹ Nebraska å¤§å­¸å‰µä¸‹9.2è¬äººé€²å ´ç´€éŒ„ï¼Œæ¨™èªŒè‘—ã€Œé«”é©—ç¶“æ¿Ÿã€çš„çˆ†ç™¼ã€‚
                            </p>
                            <ul class="mt-2 space-y-1 text-sm text-brand-600 dark:text-brand-400">
                                <li>â€¢ <strong>USA:</strong> PVF (åŸå¸‚å±¬åœ°) vs LOVB (ä¿±æ¨‚éƒ¨é€£çµ) çš„å•†æ¥­æ¨¡å¼ç«¶çˆ­ã€‚</li>
                                <li>â€¢ <strong>Japan:</strong> SV.League 2024å¹´å…¨é¢è·æ¥­åŒ–ï¼Œç›®æ¨™æˆç‚ºä¸–ç•Œæœ€é«˜è–ªè¯è³½ï¼Œæ¶‰åŠè¤‡é›œæ³•å¾‹é‡çµ„ã€‚</li>
                            </ul>
                        </div>

                        <div class="border border-brand-200 dark:border-brand-700 p-4 rounded-lg">
                            <h3 class="font-bold text-base mb-2" data-i18n="vb_tw_title">å°ç£è§€é»ï¼šä¼æ¥­è¯è³½ (TVL) çš„æŒ‘æˆ°</h3>
                            <p class="text-sm text-brand-600 dark:text-brand-400 leading-relaxed" data-i18n="vb_tw_desc">
                                å°ç£æ’çƒé¢¨æ°£æ¥µç››ï¼Œä½†è·æ¥­åŒ–è™•æ–¼éæ¸¡æœŸã€‚ç¶“æ¿Ÿç³»åˆ‡å…¥é»ï¼šåˆ†æã€ŒåŠè·æ¥­è½‰è·æ¥­ã€çš„é‚Šéš›æ•ˆç›Šï¼Œä»¥åŠçƒå“¡åˆç´„(åƒ±å‚­vså§”ä»»)çš„æ³•å¾‹ç¶“æ¿Ÿåˆ†æã€‚
                            </p>
                        </div>
                    </div>
                </div>
                <!-- Chart: League Models -->
                <div class="bg-brand-50 dark:bg-brand-900 p-4 border-t border-brand-100 dark:border-brand-700">
                    <h4 class="text-xs font-bold uppercase text-center mb-4 text-brand-500" data-i18n="chart_league_title">è¯è³½å•†æ¥­æ¨¡å¼çµæ§‹åˆ†æ</h4>
                    <div class="chart-container" style="height: 200px;">
                        <canvas id="volleyballChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Insight 2: Silver Economy & Broad Strategy -->
            <div class="bg-white dark:bg-brand-800 rounded-2xl shadow-sm border-l-8 border-brand-500 dark:border-brand-400 overflow-hidden flex flex-col">
                <div class="p-6 md:p-8 flex-grow">
                    <h2 class="text-2xl font-bold mb-4 flex items-center text-brand-800 dark:text-brand-100">
                        ğŸ“ˆ <span class="ml-2" data-i18n="silver_title">è¶…é«˜é½¡ç¤¾æœƒèˆ‡å®è§€ç­–ç•¥</span>
                    </h2>
                    
                    <div class="space-y-4">
                         <div class="bg-brand-50 dark:bg-brand-900 p-4 rounded-lg">
                            <h3 class="font-bold text-base mb-2 text-brand-700 dark:text-brand-300" data-i18n="silver_econ_title">ç¶“æ¿Ÿç³»å­¸ç”Ÿçš„åˆ‡å…¥é»</h3>
                            <p class="text-sm text-brand-600 dark:text-brand-400 leading-relaxed" data-i18n="silver_econ_desc">
                                å°ç£å³å°‡é‚å…¥è¶…é«˜é½¡ç¤¾æœƒã€‚é«”è‚²ä¸å†åªæ˜¯ç«¶æŠ€ï¼Œè€Œæ˜¯é é˜²é†«å­¸ã€‚
                                <strong>æ ¸å¿ƒèª²é¡Œï¼š</strong>å¦‚ä½•é€éã€Œé‹å‹•è™•æ–¹ã€é™ä½å¥ä¿æ”¯å‡ºï¼Ÿå¦‚ä½•è¨­è¨ˆé‡å°éŠ€é«®æ—çš„å¥èº«æˆ¿å•†æ¥­æ¨¡å¼ï¼Ÿ
                            </p>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div class="border border-brand-200 dark:border-brand-700 p-3 rounded-lg">
                                <span class="text-2xl">ğŸ§˜</span>
                                <h4 class="font-bold text-sm mt-1" data-i18n="item_yoga">ç‘œçˆèˆ‡è¼•é‹å‹•</h4>
                                <p class="text-xs mt-1 opacity-75" data-i18n="item_yoga_desc">éŠ€é«®æ—çš„ç¤¾äº¤èˆ‡åŠŸèƒ½æ€§è¨“ç·´å•†æ©Ÿã€‚</p>
                            </div>
                            <div class="border border-brand-200 dark:border-brand-700 p-3 rounded-lg">
                                <span class="text-2xl">âš–ï¸</span>
                                <h4 class="font-bold text-sm mt-1" data-i18n="item_law">é‹å‹•æ³•å¾‹</h4>
                                <p class="text-xs mt-1 opacity-75" data-i18n="item_law_desc">é«˜é½¡é‹å‹•å‚·å®³è²¬ä»»æ­¸å±¬èˆ‡ä¿éšªæ³•è¦ã€‚</p>
                            </div>
                            <div class="border border-brand-200 dark:border-brand-700 p-3 rounded-lg">
                                <span class="text-2xl">âš¾</span>
                                <h4 class="font-bold text-sm mt-1" data-i18n="item_data">æ£’çƒæ•¸æ“š</h4>
                                <p class="text-xs mt-1 opacity-75" data-i18n="item_data_desc">è–ªè³‡ä»²è£æ¨¡å‹èˆ‡ Moneyball ç­–ç•¥ã€‚</p>
                            </div>
                            <div class="border border-brand-200 dark:border-brand-700 p-3 rounded-lg">
                                <span class="text-2xl">ğŸŒ</span>
                                <h4 class="font-bold text-sm mt-1" data-i18n="item_asia">äºæ´²ç¶“é©—</h4>
                                <p class="text-xs mt-1 opacity-75" data-i18n="item_asia_desc">å€Ÿé¡æ—¥æœ¬(è»Ÿå¼æ’çƒ)èˆ‡éŸ“åœ‹çš„æ”¿ç­–ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </section>

        <!-- Dashboard Section -->
        <section id="dashboard" class="bg-white dark:bg-brand-800 rounded-2xl shadow-sm border border-brand-200 dark:border-brand-700 overflow-hidden">
            <div class="p-6 border-b border-brand-100 dark:border-brand-700 bg-brand-50 dark:bg-brand-900/50">
                <h2 class="text-2xl font-bold" data-i18n="dash_title">æ™ºæ…§æ“‡æ ¡å„€è¡¨æ¿</h2>
                <p class="text-sm text-brand-500 dark:text-brand-400 mt-1" data-i18n="dash_subtitle">ç¯©é¸é©åˆã€Œç¶“æ¿Ÿ+é«”è‚²ã€èƒŒæ™¯çš„é ‚å°–å­¸ç¨‹ (ç¾/åŠ /ç´æ¾³/äºæ´²)</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-4 gap-0">
                
                <!-- Filters -->
                <div class="p-6 border-r border-brand-200 dark:border-brand-700 bg-white dark:bg-brand-800">
                    <h3 class="font-bold mb-4 flex items-center text-sm uppercase tracking-wide text-brand-500 dark:text-brand-400" data-i18n="filter_header">
                        ç¯©é¸æ¢ä»¶ Filters
                    </h3>

                    <!-- Region -->
                    <div class="mb-6">
                        <label class="block text-xs font-semibold mb-2" data-i18n="filter_region">å€åŸŸ (Region)</label>
                        <div class="space-y-2" id="region-filters">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" value="USA" checked class="form-checkbox text-brand-accent rounded border-gray-300 dark:border-gray-600 dark:bg-brand-700">
                                <span>USA</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" value="Canada" checked class="form-checkbox text-brand-accent rounded border-gray-300 dark:border-gray-600 dark:bg-brand-700">
                                <span>Canada</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" value="Oceania" checked class="form-checkbox text-brand-accent rounded border-gray-300 dark:border-gray-600 dark:bg-brand-700">
                                <span>Oceania (AUS/NZ)</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" value="Asia" checked class="form-checkbox text-brand-accent rounded border-gray-300 dark:border-gray-600 dark:bg-brand-700">
                                <span>Asia (English Pgm)</span>
                            </label>
                        </div>
                    </div>

                    <!-- Domain -->
                    <div class="mb-6">
                        <label class="block text-xs font-semibold mb-2" data-i18n="filter_domain">å­¸è¡“é ˜åŸŸ (Domain)</label>
                        <select id="domain-select" class="w-full bg-brand-50 dark:bg-brand-900 border border-brand-300 dark:border-brand-600 text-sm rounded-lg p-2.5 dark:text-white">
                            <option value="all">å…¨éƒ¨é¡¯ç¤º (All)</option>
                            <option value="EconData">æ•¸æ“šèˆ‡ç¶“æ¿Ÿ (Econ/Data)</option>
                            <option value="LawPolicy">æ³•å¾‹èˆ‡æ”¿ç­– (Law/Policy)</option>
                            <option value="HealthSilver">å¥åº·èˆ‡éŠ€é«® (Health/Silver)</option>
                            <option value="Management">å•†æ¥­ç®¡ç† (Management)</option>
                        </select>
                    </div>

                    <!-- Sport -->
                    <div class="mb-6">
                        <label class="block text-xs font-semibold mb-2" data-i18n="filter_sport">å°ˆé …è³‡æº (Sport Focus)</label>
                        <select id="sport-select" class="w-full bg-brand-50 dark:bg-brand-900 border border-brand-300 dark:border-brand-600 text-sm rounded-lg p-2.5 dark:text-white">
                            <option value="all">å…¨éƒ¨é¡¯ç¤º (All)</option>
                            <option value="Volleyball">æ’çƒ (Volleyball)</option>
                            <option value="Baseball">æ£’çƒ (Baseball)</option>
                            <option value="Basketball">ç±ƒçƒ (Basketball)</option>
                            <option value="Outdoor">æˆ¶å¤–/è€åŠ› (Endurance)</option>
                            <option value="Health">ç‘œçˆ/å¥èº« (Fitness)</option>
                        </select>
                    </div>

                    <button id="reset-btn" class="w-full bg-brand-100 dark:bg-brand-700 hover:bg-brand-200 dark:hover:bg-brand-600 text-brand-800 dark:text-white font-medium py-2 px-4 rounded transition" data-i18n="btn_reset">
                        Reset Filters
                    </button>
                </div>

                <!-- Results -->
                <div class="lg:col-span-3 p-6 bg-brand-50 dark:bg-brand-900/30">
                    
                    <!-- Charts Row -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div class="bg-white dark:bg-brand-800 p-4 rounded-xl shadow-sm border border-brand-100 dark:border-brand-700">
                             <h4 class="text-xs font-bold uppercase text-center mb-2 text-brand-500" data-i18n="chart_radar_title">å­¸ç¨‹æ ¸å¿ƒèƒ½åŠ›åˆ†æ</h4>
                            <div class="chart-container">
                                <canvas id="radarChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white dark:bg-brand-800 p-4 rounded-xl shadow-sm border border-brand-100 dark:border-brand-700">
                             <h4 class="text-xs font-bold uppercase text-center mb-2 text-brand-500" data-i18n="chart_region_title">å€åŸŸåˆ†ä½ˆ</h4>
                            <div class="chart-container">
                                <canvas id="regionChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- List Header -->
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-lg" data-i18n="list_header">æ¨è–¦å­¸æ ¡åˆ—è¡¨</h3>
                        <span class="text-xs bg-brand-200 dark:bg-brand-700 text-brand-800 dark:text-brand-200 px-2 py-1 rounded"><span id="count-display">0</span> Programs Found</span>
                    </div>

                    <!-- Cards Grid -->
                    <div id="uni-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-4">
                        <!-- JS Injection -->
                    </div>

                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-white dark:bg-brand-900 border-t border-brand-200 dark:border-brand-700 mt-8 py-8 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center text-sm">
            <div class="text-brand-500 dark:text-brand-400 mb-4 md:mb-0">
                <span id="date-display"></span> | Â© All Rights Reserved
            </div>
            <div class="text-brand-500 dark:text-brand-400">
                Creative Editor: <a href="https://www.ibs.ncnu.edu.tw/index.php/faculty/tenured-professor/299-smlo" target="_blank" class="text-brand-accent hover:text-brand-accentHover font-medium underline decoration-brand-accent/50 hover:decoration-brand-accent">Prof. Shihmin Lo</a>
            </div>
        </div>
    </footer>

    <!-- LOGIC -->
    <script>
        // --- 1. DATA CONTENT (Bilingual) ---
        // Complete dataset incorporating Original Research + New Volleyball Data

        const dictionary = {
            zh: {
                nav_research: "ç ”ç©¶å°ˆé¡Œ", nav_analysis: "æ“‡æ ¡åˆ†æ",
                hero_title_1: "é€£çµæ•¸æ“šèˆ‡è³½å ´ï¼š", hero_title_2: "åœ‹éš›é«”è‚²ç¶“æ¿Ÿèˆ‡æ³•å¾‹æ·±é€ æŒ‡å—",
                hero_desc: "å°ˆç‚ºå…·å‚™ã€Œåœ‹éš›é«”è‚²äº‹å‹™ã€èˆ‡ã€Œç¶“æ¿Ÿç³»ã€é›™å­¸ä½èƒŒæ™¯çš„å­¸ç”Ÿè¨­è¨ˆã€‚èšç„¦ç¾ã€åŠ ã€ç´æ¾³åŠäºæ´²è‹±èªå­¸ç¨‹ã€‚é‡å°æ’çƒç”¢æ¥­ç™¼å±•ã€é«˜é½¡åŒ–ç¤¾æœƒç¶“æ¿Ÿèˆ‡é‹å‹•æ³•å¾‹é ˜åŸŸé€²è¡Œæ·±åº¦åˆ†æã€‚",
                tag_volleyball: "æ’çƒç¶“æ¿Ÿ", tag_baseball: "æ£’çƒæ•¸æ“š", tag_law: "æ³•å¾‹èˆ‡åˆè¦", tag_silver: "éŠ€é«®å•†æ©Ÿ",
                
                vb_title: "æ’çƒç¶“æ¿Ÿï¼šå…¨çƒèˆ‡å°ç£è¦–è§’",
                vb_global_title: "å…¨çƒè¶¨å‹¢ï¼šå¥³å­é‹å‹•ç¶“æ¿Ÿçš„å´›èµ·", vb_global_desc: "æ’çƒæ˜¯æ¥µå°‘æ•¸å¥³æ€§è§€çœ¾èˆ‡ç¶“æ¿Ÿåƒ¹å€¼å¸¸è¶…è¶Šç”·æ€§çš„é‹å‹•é …ç›®ã€‚ç¾åœ‹ Nebraska å¤§å­¸å‰µä¸‹9.2è¬äººé€²å ´ç´€éŒ„ï¼Œæ¨™èªŒè‘—ã€Œé«”é©—ç¶“æ¿Ÿã€åœ¨æ’çƒç”¢æ¥­çš„çˆ†ç™¼ã€‚",
                vb_tw_title: "å°ç£è§€é»ï¼šä¼æ¥­è¯è³½ (TVL) çš„æŒ‘æˆ°", vb_tw_desc: "å°ç£æ’çƒé¢¨æ°£æ¥µç››ï¼Œä½†è·æ¥­åŒ–ä»è™•æ–¼éæ¸¡æœŸã€‚ç¶“æ¿Ÿç³»åˆ‡å…¥é»ï¼šåˆ†æã€ŒåŠè·æ¥­è½‰è·æ¥­ã€çš„é‚Šéš›æ•ˆç›Šï¼Œä»¥åŠçƒå“¡åˆç´„ä»¥ä¿éšœé›™æ–¹æ¬Šç›Šã€‚",
                chart_league_title: "è¯è³½å•†æ¥­æ¨¡å¼çµæ§‹åˆ†æ (æˆç†Ÿåº¦ vs è‡ªç”±åº¦)",
                
                silver_title: "è¶…é«˜é½¡ç¤¾æœƒèˆ‡å®è§€ç­–ç•¥",
                silver_econ_title: "ç¶“æ¿Ÿç³»å­¸ç”Ÿçš„åˆ‡å…¥é»", silver_econ_desc: "å°ç£å³å°‡é‚å…¥è¶…é«˜é½¡ç¤¾æœƒã€‚é«”è‚²ä¸å†åªæ˜¯ç«¶æŠ€ï¼Œè€Œæ˜¯é é˜²é†«å­¸ã€‚æ ¸å¿ƒèª²é¡Œï¼šå¦‚ä½•é€éã€Œé‹å‹•è™•æ–¹ã€é™ä½å¥ä¿æ”¯å‡ºï¼Ÿå¦‚ä½•è¨­è¨ˆé‡å°éŠ€é«®æ—çš„å¥èº«æˆ¿å•†æ¥­æ¨¡å¼ï¼Ÿ",
                item_yoga: "ç‘œçˆèˆ‡è¼•é‹å‹•", item_yoga_desc: "éŠ€é«®æ—çš„ç¤¾äº¤èˆ‡åŠŸèƒ½æ€§è¨“ç·´å•†æ©Ÿã€‚",
                item_law: "é‹å‹•æ³•å¾‹", item_law_desc: "é«˜é½¡é‹å‹•å‚·å®³è²¬ä»»æ­¸å±¬èˆ‡ä¿éšªæ³•è¦ã€‚",
                item_data: "æ£’çƒæ•¸æ“š", item_data_desc: "è–ªè³‡ä»²è£æ¨¡å‹èˆ‡ Moneyball ç­–ç•¥ã€‚",
                item_asia: "äºæ´²ç¶“é©—", item_asia_desc: "å€Ÿé¡æ—¥æœ¬(è»Ÿå¼æ’çƒ)èˆ‡éŸ“åœ‹çš„æ”¿ç­–ã€‚",

                dash_title: "æ™ºæ…§æ“‡æ ¡å„€è¡¨æ¿", dash_subtitle: "ç¯©é¸é©åˆã€Œç¶“æ¿Ÿ+é«”è‚²ã€èƒŒæ™¯çš„é ‚å°–å­¸ç¨‹ (ç¾/åŠ /ç´æ¾³/äºæ´²)",
                filter_header: "ç¯©é¸æ¢ä»¶", filter_region: "å€åŸŸ", filter_domain: "å­¸è¡“é ˜åŸŸ", filter_sport: "å°ˆé …è³‡æº",
                btn_reset: "é‡ç½®æ¢ä»¶", list_header: "æ¨è–¦å­¸æ ¡åˆ—è¡¨",
                chart_radar_title: "å­¸ç¨‹æ ¸å¿ƒèƒ½åŠ›åˆ†æ", chart_region_title: "å€åŸŸåˆ†ä½ˆ"
            },
            en: {
                nav_research: "Insights", nav_analysis: "Program Finder",
                hero_title_1: "Data Meets the Court:", hero_title_2: "Int'l Sports Economics & Law Guide",
                hero_desc: "Designed for Dual Major students (Sports Affairs & Economics). Focusing on USA, Canada, Oceania, and Asia English programs. Deep dive into Volleyball Economics, Silver Economy, and Sports Law.",
                tag_volleyball: "Volleyball Econ", tag_baseball: "Baseball Data", tag_law: "Sports Law", tag_silver: "Silver Economy",
                
                vb_title: "Volleyball Economics: Global vs. Taiwan",
                vb_global_title: "Global Trend: The Rise of Women's Sports", vb_global_desc: "Volleyball is unique where women's leagues often outperform men's financially. The 92k attendance record at Nebraska signals an explosion in the 'Experience Economy'.",
                vb_tw_title: "Taiwan Context: TVL Challenges", vb_tw_desc: "Volleyball is huge in Taiwan, but the pro-league is transitional. Research Angle: Marginal benefits of 'Semi-Pro to Pro' transition and player contract laws.",
                chart_league_title: "League Business Models (Maturity vs Freedom)",
                
                silver_title: "Silver Economy Strategy",
                silver_econ_title: "The Economics Angle", silver_econ_desc: "Taiwan is entering a Super-Aged society. Sports is now Preventive Medicine. Key: Reducing national health insurance costs through exercise prescriptions.",
                item_yoga: "Yoga & Wellness", item_yoga_desc: "Functional training markets for the elderly.",
                item_law: "Sports Law", item_law_desc: "Liability and insurance laws for elderly participants.",
                item_data: "Baseball Data", item_data_desc: "Salary arbitration models & Moneyball.",
                item_asia: "Asian Context", item_asia_desc: "Learning from Japan (Soft Volleyball) & Korea.",

                dash_title: "Smart Program Dashboard", dash_subtitle: "Filter top programs tailored to Econ + Sports background",
                filter_header: "Filters", filter_region: "Region", filter_domain: "Domain", filter_sport: "Sport Focus",
                btn_reset: "Reset Filters", list_header: "Recommended Programs",
                chart_radar_title: "Program Capability Analysis", chart_region_title: "Regional Distribution"
            }
        };

        const universities = [
            {
                id: 1,
                name_en: "University of Nebraska-Lincoln (UNL)",
                name_zh: "å…§å¸ƒæ‹‰æ–¯åŠ å¤§å­¸æ—è‚¯åˆ†æ ¡ (UNL)",
                region: "USA",
                program: "MA in Business (Intercollegiate Athletics Admin)",
                focus: ["EconData", "Management"],
                sports: ["Volleyball"],
                scores: { theory: 8, practice: 10, legal: 5, health: 6 },
                desc_zh: "ã€æ’çƒé¦–é¸ã€‘ç¾åœ‹å¥³æ’è–åœ°(Huskers)ã€‚æ“æœ‰ä¸–ç•Œæœ€é«˜æ’çƒç¥¨æˆ¿èˆ‡ç²‰çµ²ç¶“æ¿Ÿï¼Œéå¸¸é©åˆç ”ç©¶ã€Œè·æ¥­è³½äº‹è¡ŒéŠ·ã€èˆ‡ã€Œåœ°æ–¹ç¶“æ¿Ÿå½±éŸ¿ã€ã€‚",
                desc_en: "[Top for Volleyball] The Mecca of US Volleyball. Holds attendance records. Perfect for researching 'Fan Economics' and regional economic impact."
            },
            {
                id: 2,
                name_en: "Rice University",
                name_zh: "èŠæ–¯å¤§å­¸ (Rice)",
                region: "USA",
                program: "Sport Analytics",
                focus: ["EconData"],
                sports: ["Baseball", "Basketball"],
                scores: { theory: 10, practice: 6, legal: 4, health: 5 },
                desc_zh: "ã€ç¶“æ¿Ÿç³»é¦–é¸ã€‘å¾·å·å­¸è¡“é‡é®ã€‚å…¶é‹å‹•åˆ†æèª²ç¨‹å¼·èª¿é«˜éšçµ±è¨ˆèˆ‡ç¶“æ¿Ÿå»ºæ¨¡ (Moneyball style)ï¼Œé©åˆç¶“æ¿Ÿç³»èƒŒæ™¯é‘½ç ”æ•¸æ“šã€‚",
                desc_en: "[Top for Econ] Academic powerhouse in Texas. Focuses on advanced statistics and economic modeling. Perfect for Econ majors."
            },
            {
                id: 3,
                name_en: "University of Florida",
                name_zh: "ä½›ç¾…é‡Œé”å¤§å­¸ (UF)",
                region: "USA",
                program: "Sport Management (MS/PhD)",
                focus: ["Management", "HealthSilver", "Volleyball", "LawPolicy"],
                sports: ["Volleyball", "Baseball", "Health"],
                scores: { theory: 8, practice: 8, legal: 8, health: 9 },
                desc_zh: "ã€ç¶œåˆé¦–é¸ã€‘ä½›å·æ˜¯é€€ä¼‘å¤©å ‚ä¹Ÿæ˜¯æ’çƒå¼·æ¬Šã€‚æ“æœ‰é ‚å°–æ³•å­¸é™¢èˆ‡é‹å‹•ç®¡ç†ï¼Œé©åˆç ”ç©¶é«˜é½¡é‹å‹•å¸‚å ´èˆ‡æ³•å¾‹çš„çµåˆã€‚",
                desc_en: "[Comprehensive] Florida is a retirement hub and volleyball powerhouse. Great for connecting elderly wellness markets with sports law."
            },
            {
                id: 4,
                name_en: "University of Tsukuba",
                name_zh: "ç­‘æ³¢å¤§å­¸",
                region: "Asia",
                program: "TIAS (Tsukuba Int'l Academy for Sport Studies)",
                focus: ["Management", "HealthSilver", "EconData"],
                sports: ["Volleyball", "Health"],
                scores: { theory: 9, practice: 8, legal: 5, health: 9 },
                desc_zh: "ã€äºæ´²ç§‘ç ”ã€‘æ—¥æœ¬æ’çƒç§‘ç ”æœ€å¼·æ ¡ï¼Œå…¨è‹±æ–‡å­¸ç¨‹ã€‚é©åˆç ”ç©¶æ—¥æœ¬ SV.League æ”¹é©ã€æ°£æ’çƒ(Soft Volleyball)å°é«˜é½¡ç¤¾æœƒçš„è²¢ç»ã€‚",
                desc_en: "[Asia Research] Japan's top sports science hub. English program. Ideal for studying SV.League reforms and Soft Volleyball for the elderly."
            },
            {
                id: 5,
                name_en: "University of Oregon",
                name_zh: "å¥§å‹’å²¡å¤§å­¸ (UO)",
                region: "USA",
                program: "Warsaw Sports Marketing Center (MBA)",
                focus: ["Management", "EconData"],
                sports: ["Outdoor", "Basketball"],
                scores: { theory: 7, practice: 10, legal: 5, health: 6 },
                desc_zh: "ã€ç”¢æ¥­å¯¦å‹™ã€‘Nike ç¸½éƒ¨æ‰€åœ¨åœ°ã€‚é©åˆæƒ³çµåˆã€Œè¡ŒéŠ·æ•¸æ“šã€èˆ‡ã€Œç¶“æ¿Ÿåˆ†æã€çš„å­¸ç”Ÿã€‚å…¨ç¾é ‚å°–çš„ç”¢å­¸é€£çµã€‚",
                desc_en: "[Industry] Located near Nike HQ. Top choice for combining Marketing Data with Economic Analysis. Industry links are unmatched."
            },
            {
                id: 6,
                name_en: "Waseda University",
                name_zh: "æ—©ç¨»ç”°å¤§å­¸",
                region: "Asia",
                program: "Sport Sciences (English Program)",
                focus: ["Management", "HealthSilver", "EconData"],
                sports: ["Baseball", "Volleyball", "Health"],
                scores: { theory: 9, practice: 8, legal: 6, health: 9 },
                desc_zh: "ã€äºæ´²æ”¿ç­–ã€‘æ—¥æœ¬ç§æ ¡ä¹‹é¦–ã€‚æ—¥æœ¬æ˜¯è¶…é«˜é½¡ç¤¾æœƒå‰è¼©ï¼Œå…¶ã€Œç¤¾å€é‹å‹•æ”¿ç­–ã€èˆ‡æ£’çƒ/æ’çƒè·æ¥­åŒ–æ­·ç¨‹æ¥µå…·åƒè€ƒåƒ¹å€¼ã€‚",
                desc_en: "[Asia Policy] Top private uni in Japan. A pioneer in 'Super-Aged' society policies. Great for studying community sports and pro-leagues."
            },
            {
                id: 7,
                name_en: "Deakin University",
                name_zh: "è¿ªè‚¯å¤§å­¸",
                region: "Oceania",
                program: "Master of Business (Sport Management)",
                focus: ["Management", "EconData"],
                sports: ["Outdoor", "Basketball", "Health"],
                scores: { theory: 8, practice: 10, legal: 6, health: 8 },
                desc_zh: "ã€å…¨çƒç®¡ç†No.1ã€‘ä½æ–¼å¢¨çˆ¾æœ¬ã€‚èª²ç¨‹å¯¦å‹™æ¥µå¼·ï¼Œæ¾³æ´²æ¥µåº¦é‡è¦–å¥³æ€§é‹å‹•èˆ‡ç¤¾å€é«”è‚²ç™¼å±•ï¼Œé©åˆå•†æ¥­æ¨¡å¼ç ”ç©¶ã€‚",
                desc_en: "[#1 Global Ranking] Located in Melbourne. Highly practical, focusing on women in sport and community development business models."
            },
            {
                id: 8,
                name_en: "UBC (Univ. of British Columbia)",
                name_zh: "ä¸åˆ—é¡›å“¥å€«æ¯”äºå¤§å­¸ (UBC)",
                region: "Canada",
                program: "Kinesiology (MA/MSc/PhD)",
                focus: ["HealthSilver", "Management"],
                sports: ["Outdoor", "Health", "Volleyball"], 
                scores: { theory: 9, practice: 7, legal: 5, health: 10 },
                desc_zh: "ã€ç¤¾æœƒæ”¿ç­–ã€‘åŠ æ‹¿å¤§è¥¿å²¸åæ ¡ã€‚å…¶ç ”ç©¶é«˜åº¦é—œæ³¨ã€Œç¤¾æœƒæ–‡åŒ–ã€èˆ‡ã€Œå¥åº·è€åŒ–ã€ï¼Œé©åˆå¾ç¤¾æœƒç¶“æ¿Ÿè§’åº¦åˆ‡å…¥ã€‚",
                desc_en: "[Social Policy] Top Canadian uni. Research focuses on socio-cultural aspects and healthy aging. Good for socio-economic analysis."
            },
            {
                id: 9,
                name_en: "Indiana University Bloomington",
                name_zh: "å°ç¬¬å®‰ç´å¤§å­¸ (IU)",
                region: "USA",
                program: "Sport Management / Public Health",
                focus: ["Management", "LawPolicy"],
                sports: ["Basketball", "Health"],
                scores: { theory: 7, practice: 8, legal: 9, health: 7 },
                desc_zh: "ã€æ³•å¾‹èˆ‡å…¬è¡›ã€‘æ“æœ‰å¼·å¤§çš„æ³•å­¸é™¢èˆ‡å…¬å…±è¡›ç”Ÿå­¸é™¢ã€‚é©åˆæƒ³èµ°ã€Œé‹å‹•æ³•å¾‹+å…¬è¡›æ”¿ç­–ã€è·¨é ˜åŸŸè·¯ç·šçš„å­¸ç”Ÿã€‚",
                desc_en: "[Law & Public Health] Strong Law and Public Health schools. Ideal for an interdisciplinary path combining Sports Law and Health Policy."
            },
             {
                id: 10,
                name_en: "University of Queensland",
                name_zh: "æ˜†å£«è˜­å¤§å­¸ (UQ)",
                region: "Oceania",
                program: "Human Movement and Nutrition Sciences",
                focus: ["HealthSilver", "LawPolicy"],
                sports: ["Outdoor", "Health", "Racket"],
                scores: { theory: 9, practice: 7, legal: 7, health: 10 },
                desc_zh: "ã€å¥§é‹éºç”¢ã€‘2032 å¥§é‹ä¸»è¾¦åœ°ã€‚å…¶ç ”ç©¶åœ¨é‹å‹•é†«å­¸ã€æ³•å¾‹èˆ‡å€«ç†æ–¹é¢é ˜å…ˆï¼Œéå¸¸é©åˆç ”ç©¶å¤§å‹è³½äº‹å°åŸå¸‚çš„ç¶“æ¿Ÿå½±éŸ¿ã€‚",
                desc_en: "[Olympics Legacy] Host of 2032 Olympics. Leading research in sports medicine, law, and ethics. Great for event impact studies."
            }
        ];

        // --- 2. STATE MANAGEMENT ---
        let state = {
            lang: 'zh', // Default to Traditional Chinese
            theme: 'light', // Default Light
            regions: ['USA', 'Canada', 'Oceania', 'Asia'],
            domain: 'all',
            sport: 'all'
        };

        // --- 3. INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Set Date
            const today = new Date();
            const dateStr = today.getFullYear() + '.' + (today.getMonth()+1).toString().padStart(2,'0') + '.' + today.getDate().toString().padStart(2,'0');
            document.getElementById('date-display').textContent = `v2.2 (${dateStr})`;

            initSettings();
            initFilters();
            renderAll();
        });

        // --- 4. SETTINGS & UI LOGIC ---
        function initSettings() {
            // Theme
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', () => {
                state.theme = state.theme === 'light' ? 'dark' : 'light';
                applyTheme();
            });

            // Lang
            const langToggle = document.getElementById('lang-toggle');
            langToggle.addEventListener('click', () => {
                state.lang = state.lang === 'zh' ? 'en' : 'zh';
                applyLang();
                renderAll(); // Re-render charts and cards for text update
            });
        }

        function applyTheme() {
            const html = document.documentElement;
            const icon = document.getElementById('theme-icon');
            if (state.theme === 'dark') {
                html.classList.add('dark');
                icon.textContent = 'â˜€ï¸';
            } else {
                html.classList.remove('dark');
                icon.textContent = 'ğŸŒ™';
            }
            renderCharts(); // Re-render charts for color updates
            renderVolleyballChart();
        }

        function applyLang() {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (dictionary[state.lang][key]) {
                    el.textContent = dictionary[state.lang][key];
                }
            });
        }

        // --- 5. FILTER LOGIC ---
        function initFilters() {
            const regionChecks = document.querySelectorAll('#region-filters input');
            regionChecks.forEach(input => {
                input.addEventListener('change', () => {
                    state.regions = Array.from(regionChecks).filter(cb => cb.checked).map(cb => cb.value);
                    renderAll();
                });
            });

            document.getElementById('domain-select').addEventListener('change', (e) => {
                state.domain = e.target.value;
                renderAll();
            });

            document.getElementById('sport-select').addEventListener('change', (e) => {
                state.sport = e.target.value;
                renderAll();
            });

            document.getElementById('reset-btn').addEventListener('click', () => {
                document.querySelectorAll('#region-filters input').forEach(cb => cb.checked = true);
                document.getElementById('domain-select').value = 'all';
                document.getElementById('sport-select').value = 'all';
                state.regions = ['USA', 'Canada', 'Oceania', 'Asia'];
                state.domain = 'all';
                state.sport = 'all';
                renderAll();
            });
        }

        function renderAll() {
            const filtered = filterData();
            renderList(filtered);
            renderCharts(filtered);
            renderVolleyballChart(); // Always render the VB chart
        }

        function filterData() {
            return universities.filter(uni => {
                if (!state.regions.includes(uni.region)) return false;
                if (state.domain !== 'all' && !uni.focus.includes(state.domain)) return false;
                if (state.sport !== 'all' && !uni.sports.includes(state.sport)) return false;
                return true;
            });
        }

        // --- 6. RENDER LIST ---
        function renderList(data) {
            const container = document.getElementById('uni-grid');
            const countDisplay = document.getElementById('count-display');
            container.innerHTML = '';
            countDisplay.textContent = data.length;

            if (data.length === 0) {
                container.innerHTML = `<div class="col-span-full text-center py-10 text-brand-500 dark:text-brand-400 opacity-70">
                    ${state.lang === 'zh' ? 'æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„å­¸ç¨‹ã€‚è«‹æ”¾å¯¬ç¯©é¸æ¨™æº–ã€‚' : 'No programs match your filters. Please adjust.'}
                </div>`;
                return;
            }

            data.forEach(uni => {
                const name = state.lang === 'zh' ? uni.name_zh : uni.name_en;
                const desc = state.lang === 'zh' ? uni.desc_zh : uni.desc_en;
                
                // Sport Icons
                const sportsHtml = uni.sports.map(s => {
                    if (s === 'Volleyball') return '<span title="Volleyball" class="mr-1 bg-brand-100 dark:bg-brand-700 px-1 rounded">ğŸ</span>';
                    if (s === 'Baseball') return '<span title="Baseball" class="mr-1 bg-brand-100 dark:bg-brand-700 px-1 rounded">âš¾</span>';
                    if (s === 'Basketball') return '<span title="Basketball" class="mr-1 bg-brand-100 dark:bg-brand-700 px-1 rounded">ğŸ€</span>';
                    if (s === 'Health') return '<span title="Health/Yoga" class="mr-1 bg-brand-100 dark:bg-brand-700 px-1 rounded">ğŸ§˜</span>';
                    if (s === 'Outdoor') return '<span title="Outdoor" class="mr-1 bg-brand-100 dark:bg-brand-700 px-1 rounded">ğŸƒ</span>';
                    return '';
                }).join('');

                const card = document.createElement('div');
                card.className = 'bg-white dark:bg-brand-800 rounded-xl p-5 border border-brand-200 dark:border-brand-700 hover:shadow-lg transition flex flex-col justify-between';
                card.innerHTML = `
                    <div>
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs font-bold text-brand-400 uppercase tracking-wide border border-brand-200 dark:border-brand-600 px-2 py-0.5 rounded">${uni.region}</span>
                            <div class="flex text-lg">${sportsHtml}</div>
                        </div>
                        <h3 class="font-bold text-lg text-brand-800 dark:text-brand-100 leading-tight mb-1">${name}</h3>
                        <p class="text-xs text-brand-500 dark:text-brand-400 mb-3 font-medium">${uni.program}</p>
                        <p class="text-sm text-brand-600 dark:text-brand-300 mb-4 line-clamp-3 leading-relaxed">${desc}</p>
                    </div>
                    <div class="pt-3 border-t border-brand-100 dark:border-brand-700 flex justify-between items-center">
                        <span class="text-xs text-brand-400">${state.lang === 'zh' ? 'é©é…åº¦åˆ†æ' : 'Fit Analysis'}</span>
                        <div class="flex gap-1">
                            <div class="h-2 w-2 rounded-full ${uni.scores.theory > 7 ? 'bg-brand-accent' : 'bg-brand-200 dark:bg-brand-600'}" title="Econ Theory"></div>
                            <div class="h-2 w-2 rounded-full ${uni.scores.legal > 6 ? 'bg-brand-accent' : 'bg-brand-200 dark:bg-brand-600'}" title="Legal"></div>
                            <div class="h-2 w-2 rounded-full ${uni.scores.health > 7 ? 'bg-brand-accent' : 'bg-brand-200 dark:bg-brand-600'}" title="Health"></div>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- 7. CHARTS (Chart.js) ---
        let radarChartInstance = null;
        let regionChartInstance = null;
        let volleyballChartInstance = null;

        function getChartColors() {
            const isDark = state.theme === 'dark';
            return { 
                text: isDark ? '#94a3b8' : '#64748b', 
                grid: isDark ? '#334155' : '#e2e8f0', 
                accent: isDark ? '#fbbf24' : '#d97706', // Amber 400 vs 600
                bg: isDark ? 'rgba(251, 191, 36, 0.2)' : 'rgba(217, 119, 6, 0.2)',
                secondary: isDark ? '#475569' : '#cbd5e1'
            };
        }

        function renderCharts(data) {
            if (!data) return;
            const colors = getChartColors();

            // 1. Radar Chart (Average Scores)
            const ctxRadar = document.getElementById('radarChart').getContext('2d');
            let avg = { theory: 0, practice: 0, legal: 0, health: 0 };
            
            if (data.length > 0) {
                data.forEach(d => {
                    avg.theory += d.scores.theory;
                    avg.practice += d.scores.practice;
                    avg.legal += d.scores.legal;
                    avg.health += d.scores.health;
                });
                Object.keys(avg).forEach(k => avg[k] /= data.length);
            }

            const radarConfig = {
                type: 'radar',
                data: {
                    labels: state.lang === 'zh' 
                        ? ['å­¸è¡“ç†è«– (Econ)', 'ç”¢æ¥­å¯¦å‹™', 'æ³•å¾‹åˆè¦', 'å¥åº·/éŠ€é«®'] 
                        : ['Theory (Econ)', 'Practice', 'Legal', 'Health'],
                    datasets: [{
                        label: 'Average Score',
                        data: [avg.theory, avg.practice, avg.legal, avg.health],
                        backgroundColor: colors.bg,
                        borderColor: colors.accent,
                        borderWidth: 2,
                        pointBackgroundColor: colors.accent,
                        pointBorderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: colors.grid },
                            grid: { color: colors.grid },
                            pointLabels: { color: colors.text, font: { size: 11 } },
                            suggestedMin: 0, suggestedMax: 10,
                            ticks: { display: false, backdropColor: 'transparent' }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            };

            if (radarChartInstance) radarChartInstance.destroy();
            radarChartInstance = new Chart(ctxRadar, radarConfig);

            // 2. Region Chart (Doughnut)
            const ctxRegion = document.getElementById('regionChart').getContext('2d');
            const counts = { USA: 0, Canada: 0, Oceania: 0, Asia: 0 };
            data.forEach(d => { if(counts[d.region] !== undefined) counts[d.region]++; });

            const regionConfig = {
                type: 'doughnut',
                data: {
                    labels: ['USA', 'Canada', 'Oceania', 'Asia'],
                    datasets: [{
                        data: [counts.USA, counts.Canada, counts.Oceania, counts.Asia],
                        backgroundColor: ['#3b82f6', '#ef4444', '#10b981', '#f59e0b'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { position: 'bottom', labels: { color: colors.text, padding: 20 } } 
                    }
                }
            };

            if (regionChartInstance) regionChartInstance.destroy();
            regionChartInstance = new Chart(ctxRegion, regionConfig);
        }

        function renderVolleyballChart() {
            const ctx = document.getElementById('volleyballChart').getContext('2d');
            const colors = getChartColors();
            
            // Labels and Data for Volleyball Models
            const labels = state.lang === 'zh' 
                ? ['PVF (USA)', 'SV.League (JP)', 'TVL (Taiwan)', 'NCAA (USA)']
                : ['PVF (USA)', 'SV.League (JP)', 'TVL (Taiwan)', 'NCAA (USA)'];

            const chartConfig = {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: state.lang === 'zh' ? 'å•†æ¥­æˆç†Ÿåº¦ (Maturity)' : 'Commercial Maturity',
                        data: [5, 9, 3, 10], 
                        backgroundColor: colors.accent,
                        barPercentage: 0.5,
                        categoryPercentage: 0.8
                    }, {
                        label: state.lang === 'zh' ? 'é«”åˆ¶è‡ªç”±åº¦ (Freedom)' : 'Structural Freedom',
                        data: [9, 6, 2, 4], 
                        backgroundColor: colors.secondary,
                        barPercentage: 0.5,
                        categoryPercentage: 0.8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { 
                            ticks: { color: colors.text }, 
                            grid: { display: false } 
                        },
                        y: { 
                            display: true, 
                            ticks: { display: false }, 
                            grid: { color: colors.grid, drawBorder: false },
                            max: 11
                        }
                    },
                    plugins: { 
                        legend: { labels: { color: colors.text } },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ": " + context.raw + "/10";
                                }
                            }
                        }
                    }
                }
            };

            if (volleyballChartInstance) volleyballChartInstance.destroy();
            volleyballChartInstance = new Chart(ctx, chartConfig);
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

    </script>
</body>
</html>